<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
		xmlns:th="http://www.thymeleaf.org" th:lang="${#locale.language}">
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>

	<link rel="icon" href="/favicon.ico" th:href="@{/favicon.ico}"/>

	<title th:text="#{app.title}">TrainTracker</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/bootstrap/3.3.6/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/pace/1.0.2/themes/blue/pace-theme-flash.css" th:href="@{/webjars/pace/themes/blue/pace-theme-flash.css}"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/flag-icon-css/0.7.1/css/flag-icon.min.css" th:href="@{/webjars/flag-icon-css/css/flag-icon.min.css}"/>

	<style>
		body { padding-top: 70px; }
	</style>

	<!--[if lt IE 9]>
	<script src="https://cdn.jsdelivr.net/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://cdn.jsdelivr.net/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only" th:text="#{navbar.toggleNavigation}">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/" th:href="${#httpServletRequest.requestURI}" th:text="#{navbar.title}">TrainTracker</a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span th:text="#{navbar.country}" th:remove="tag">Country</span> <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li th:each="country : ${supportedCountries}">
								<a href="#" th:href="${country}"><span class="flag-icon flag-icon-hr" th:class="${'flag-icon flag-icon-' + country}"></span> <span th:text="#{'navbar.country.' + ${country}}" th:remove="tag">Hrvatski</span></a>
							</li>
						</ul>
					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span th:text="#{navbar.language}" th:remove="tag">Language</span> <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#" th:href="@{${#httpServletRequest.requestURI}(locale=en)}"><span class="flag-icon flag-icon-gb"></span> English</a></li>
							<li><a href="#" th:href="@{${#httpServletRequest.requestURI}(locale=hr)}"><span class="flag-icon flag-icon-hr"></span> Hrvatski</a></li>
						</ul>
					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span th:text="#{navbar.help}" th:remove="tag">Help</span> <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#" data-toggle="modal" data-target="#shortcuts" th:text="#{navbar.shortcuts}">Shortcuts</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container">
		<div class="well">
			<h4 th:text="#{search.title}">Search by train number</h4>
			<form class="form-inline" id="search-form">
				<div class="form-group">
					<label class="sr-only" for="train-no-input" th:text="#{search.trainNo}">Train number</label>
					<input type="number" class="form-control" id="train-no-input" placeholder="Train number" th:placeholder="#{search.trainNo}" th:value="${train}"/>
				</div>
				<button type="submit" class="btn btn-primary" id="submit-button" disabled="disabled" th:text="#{search.submit}">Search</button>
			</form>
			<h4 th:text="#{saved.title}">Saved trains</h4>
			<div>
				<p id="saved-trains"></p>
			</div>
		</div>
	</div>

	<div class="container" id="train-data"></div>

	<div class="modal fade" id="shortcuts" tabindex="-1" role="dialog" aria-labelledby="header-shortcuts">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="header-shortcuts" th:text="#{shortcuts.title}">Shortcuts</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-md-2 text-center"><strong>/</strong></div>
						<div class="col-md-8" th:text="#{shortcuts.focusSearch}">Focus search input</div>
					</div>
					<div class="row">
						<div class="col-md-2 text-center"><strong>s</strong></div>
						<div class="col-md-8" th:text="#{shortcuts.toggleSaved}">Show/hide saved trains</div>
					</div>
					<div class="row">
						<div class="col-md-2 text-center"><strong>h</strong></div>
						<div class="col-md-8" th:text="#{shortcuts.toggleHistory}">Show/hide full voyage history</div>
					</div>
					<div class="row">
						<div class="col-md-2 text-center"><strong>r</strong></div>
						<div class="col-md-8" th:text="#{shortcuts.refresh}">Refresh current search</div>
					</div>
					<div class="row">
						<div class="col-md-2 text-center"><strong>?</strong></div>
						<div class="col-md-8" th:text="#{shortcuts.show}">Show shortcuts</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/jquery/1.12.4/jquery.min.js" th:src="@{/webjars/jquery/jquery.min.js}"></script>
	<script src="https://cdn.jsdelivr.net/bootstrap/3.3.6/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/bootstrap.min.js}"></script>
	<script src="https://cdn.jsdelivr.net/pace/1.0.2/pace.min.js" th:src="@{/webjars/pace/pace.min.js}"></script>
	<script src="https://cdn.jsdelivr.net/mousetrap/1.5.3/mousetrap.min.js" th:src="@{/webjars/mousetrap/mousetrap.min.js}"></script>
	<script src="https://cdn.jsdelivr.net/mousetrap/1.5.3/plugins/global-bind/mousetrap-global-bind.min.js" th:src="@{/webjars/mousetrap/mousetrap-global-bind.min.js}"></script>
	<script src="https://cdn.jsdelivr.net/mousetrap/1.5.3/plugins/bind-dictionary/mousetrap-bind-dictionary.min.js" th:src="@{/webjars/mousetrap/mousetrap-bind-dictionary.min.js}"></script>
	<script th:inline="javascript">
		var messages = {
			'saved.add': /*[[#{saved.add}]]*/ 'Add to saved trains',
			'saved.empty': /*[[#{saved.empty}]]*/ 'No saved trains',
			'saved.remove': /*[[#{saved.remove}]]*/ 'Remove from saved trains',
			'voyage.generated': /*[[#{voyage.generated}]]*/ 'Generated on {0}.'
		};
	</script>
	<script src="/app.js"></script>
</body>
</html>
